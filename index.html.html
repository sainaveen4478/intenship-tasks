<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Climate Pledge — Ocean Wave Model</title>
  <meta name="description" content="Ocean Wave-themed Climate Action Pledge microsite with certificate and pledge wall.">
  <style>
    /* ===========================
       Ocean Wave Model — All CSS
       =========================== */

    /* Root variables */
    :root{
      --bg-1:#f7fcff;
      --bg-2:#eaf7fb;
      --ocean-1:#01658a;
      --ocean-2:#02a6d8;
      --accent:#ff7a59;
      --card:#ffffff;
      --muted:#5b6b74;
      --glass:rgba(255,255,255,0.75);
    }

    /* Base */
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;color:var(--ocean-1);background:linear-gradient(180deg,var(--bg-1),var(--bg-2))}
    .container{max-width:1100px;margin:0 auto;padding:20px}

    /* Header & hero */
    header{padding:36px 0}
    .hero{display:flex;gap:20px;align-items:center}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{
      width:56px;height:56px;border-radius:12px;
      background:linear-gradient(135deg,var(--ocean-1),var(--ocean-2));
      display:flex;align-items:center;justify-content:center;color:white;font-weight:800;font-size:18px;
      box-shadow:0 8px 26px rgba(1,101,138,0.12)
    }
    h1{margin:0;font-size:clamp(20px,3.8vw,34px)}
    .tag{margin:6px 0 0;color:var(--muted);font-size:14px}

    /* Layout */
    .layout{display:grid;grid-template-columns:1fr 360px;gap:20px;margin-top:18px}
    @media (max-width:980px){.layout{grid-template-columns:1fr}.hero{flex-direction:column;align-items:flex-start}}

    /* Cards */
    .card{background:linear-gradient(180deg,var(--card),var(--glass));padding:18px;border-radius:12px;box-shadow:0 8px 24px rgba(2,20,30,0.06)}
    .muted{color:var(--muted);font-size:13px}

    /* KPI tiles (vertical stack in right rail) */
    .kpi-stack{display:flex;flex-direction:column;gap:12px}
    .kpi-tile{display:flex;justify-content:space-between;align-items:center;padding:12px;border-radius:10px;background:linear-gradient(90deg,#ffffff,#f0fbff);border:1px solid #e8f6fb}
    .kpi-value{font-weight:800;color:var(--ocean-2);font-size:20px}
    .kpi-label{font-size:13px;color:var(--muted)}

    /* Form */
    form{display:flex;flex-direction:column;gap:12px}
    .row{display:flex;gap:10px}
    .row .col{flex:1}
    label{display:block;font-weight:600;margin-bottom:6px}
    input,select{padding:10px;border-radius:10px;border:1px solid #e6eef2;background:white;width:100%}
    .themes{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
    .theme{padding:10px;border-radius:10px;background:linear-gradient(180deg,#fff,#f7fdff);border:1px solid #e7f5ff}
    .checkbox{display:block;margin-top:6px;font-weight:500;color:var(--muted)}

    /* Certificate preview (modal-like card) */
    .cert-preview{display:none;padding:18px;border-radius:12px;text-align:center;background:linear-gradient(180deg,#fff,#f3fcff);border:1px solid #dff3ff}
    .cert-title{font-size:18px;font-weight:800;color:var(--ocean-1)}
    .cert-name{font-size:16px;font-weight:700;margin-top:8px}
    .cert-stars{margin-top:10px;font-size:18px}

    /* Pledge wall */
    .pledge-wall{margin-top:10px;overflow:auto;max-height:320px}
    table{width:100%;border-collapse:collapse}
    th,td{padding:10px;border-bottom:1px solid #f3f7f8;text-align:left;font-size:13px}
    thead th{position:sticky;top:0;background:transparent}

    /* Footer */
    footer{margin-top:20px;padding:18px;text-align:center;color:var(--muted);font-size:13px}

    /* Buttons */
    .btn{background:linear-gradient(90deg,var(--ocean-2),var(--ocean-1));color:white;padding:10px 14px;border-radius:10px;border:0;font-weight:700;cursor:pointer}
    .btn-ghost{background:none;border:1px solid #e6eef2;padding:10px 12px;border-radius:10px;color:var(--ocean-1);cursor:pointer}

    /* small */
    .small{font-size:13px;color:var(--muted)}

    /* subtle animation */
    .fadein{opacity:0;transform:translateY(8px);animation:fade .5s ease forwards}
    @keyframes fade{to{opacity:1;transform:none}}

  </style>
</head>
<body>
  <div class="container">
    <header class="hero fadein">
      <div class="brand">
        <div class="logo">CW</div>
        <div>
          <h1>Climate Pledge — Ocean Wave</h1>
          <div class="tag">Make a short commitment. Get certified. Inspire your circle.</div>
        </div>
      </div>
      <div style="margin-left:auto;display:flex;gap:10px;align-items:center">
        <button class="btn" id="btnPledgeScroll">Take Pledge</button>
        <button class="btn-ghost" id="btnClearLocal">Clear (dev)</button>
      </div>
    </header>

    <div class="layout">
      <!-- Main column -->
      <main>
        <section class="card fadein">
          <h3>Why this matters</h3>
          <p class="muted">Small everyday decisions — from food choices to commuting — combine to shape emissions and local environments. Pledge what you can, and encourage others by being visible on the wall below.</p>
        </section>

        <section id="formCard" class="card fadein" style="margin-top:14px">
          <h3 id="formTop">Pledge Form</h3>
          <form id="pledgeForm">
            <div class="row">
              <div class="col">
                <label for="name">Name *</label>
                <input id="name" required />
              </div>
              <div class="col">
                <label for="profile">Profile *</label>
                <select id="profile" required>
                  <option>Student</option>
                  <option>Working Professional</option>
                  <option>Other</option>
                </select>
              </div>
            </div>

            <div class="row">
              <div class="col">
                <label for="email">Email *</label>
                <input id="email" type="email" required />
              </div>
              <div class="col">
                <label for="mobile">Mobile *</label>
                <input id="mobile" required />
              </div>
            </div>

            <div>
              <label for="state">State</label>
              <input id="state" placeholder="e.g., Tamil Nadu" />
            </div>

            <div>
              <label>Commitment Themes</label>
              <div class="themes" id="themes">
                <div class="theme">
                  <div style="font-weight:700">Transport</div>
                  <label class="checkbox"><input type="checkbox" name="commit" value="Walk/Bike"> Walk/Bike weekly</label>
                  <label class="checkbox"><input type="checkbox" name="commit" value="Carpool"> Carpool / Transit</label>
                  <label class="checkbox"><input type="checkbox" name="commit" value="LessDrive"> Fewer car trips</label>
                </div>
                <div class="theme">
                  <div style="font-weight:700">Food & Waste</div>
                  <label class="checkbox"><input type="checkbox" name="commit" value="PlantMeals"> Plant-forward meal</label>
                  <label class="checkbox"><input type="checkbox" name="commit" value="Compost"> Compost food waste</label>
                  <label class="checkbox"><input type="checkbox" name="commit" value="NoSingleUse"> Avoid single-use plastics</label>
                </div>
                <div class="theme">
                  <div style="font-weight:700">Energy</div>
                  <label class="checkbox"><input type="checkbox" name="commit" value="LEDs"> Switch to LEDs</label>
                  <label class="checkbox"><input type="checkbox" name="commit" value="EffAppliances"> Efficient appliances</label>
                  <label class="checkbox"><input type="checkbox" name="commit" value="Thermostat"> Conserve heating/cooling</label>
                </div>
              </div>
            </div>

            <div style="display:flex;gap:12px;align-items:center;margin-top:6px;flex-wrap:wrap">
              <button class="btn" type="submit">Submit Pledge</button>
              <div class="small">Email & Mobile used for verification only — not displayed publicly.</div>
            </div>

            <div id="formMsg" class="small" style="margin-top:8px;color:var(--ocean-2)"></div>
          </form>
        </section>

        <section class="card fadein" style="margin-top:14px">
          <h3>Certificate</h3>
          <p class="muted">Your certificate appears instantly after submission. Print or save to share.</p>

          <div id="certBox" class="cert-preview" role="region" aria-live="polite">
            <div class="cert-title">Certified: Cool Enough to Care</div>
            <div id="certName" class="cert-name">[Name]</div>
            <div id="certStars" class="cert-stars">⭐⭐⭐</div>
            <div style="margin-top:8px" class="small">Thank you for pledging climate-positive actions.</div>
            <div style="margin-top:12px;display:flex;gap:8px;justify-content:center">
              <button class="btn" id="btnPrintCert">Print / Save</button>
              <button class="btn-ghost" id="btnCloseCert">Close</button>
            </div>
          </div>
        </section>
      </main>

      <!-- Right rail -->
      <aside>
        <div class="card fadein">
          <h4 style="margin:0 0 8px 0">Live KPIs</h4>
          <div class="kpi-stack">
            <div class="kpi-tile"><div><div class="kpi-label">Target</div><div class="kpi-value">1,000,000</div></div></div>
            <div class="kpi-tile"><div><div class="kpi-label">Achieved</div><div id="kpiAchieved" class="kpi-value">0</div></div></div>
            <div class="kpi-tile"><div><div class="kpi-label">Students</div><div id="kpiStudents" class="kpi-value">0</div></div></div>
            <div class="kpi-tile"><div><div class="kpi-label">Professionals</div><div id="kpiPros" class="kpi-value">0</div></div></div>
            <div class="kpi-tile"><div><div class="kpi-label">Others</div><div id="kpiOther" class="kpi-value">0</div></div></div>
          </div>
        </div>

        <div class="card fadein" style="margin-top:12px">
          <h4 style="margin:0 0 8px 0">Pledge Wall</h4>
          <div class="pledge-wall">
            <table>
              <thead><tr><th>ID</th><th>Name</th><th>Date</th><th>Profile</th><th>⭐</th></tr></thead>
              <tbody id="pledgeTbody"></tbody>
            </table>
          </div>
        </div>
      </aside>
    </div>

    <footer>
      Built for the Web Developer Internship task — Ocean Wave model. Deployable as a static file (GitHub Pages / Netlify / Vercel).
    </footer>
  </div>

  <script>
    /* =========================
       Ocean Wave Model — JS
       ========================= */

    const STORAGE_KEY = 'ocean_pledges_v2';
    const $ = s => document.querySelector(s);
    const $$ = s => Array.from(document.querySelectorAll(s));

    // Helpers
    function load(){ try { return JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]'); } catch(e){ return []; } }
    function save(list){ localStorage.setItem(STORAGE_KEY, JSON.stringify(list)); }
    function idGen(){ return 'OW' + Date.now().toString().slice(-6).padStart(6,'0'); }
    function fmtDate(ts){ return new Date(ts).toLocaleString('en-GB',{year:'numeric',month:'short',day:'numeric'}); }
    function esc(s){ return String(s).replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

    // Initial seed (if empty) for demo
    if(load().length === 0){
      const seed = [
        {id:'OW100001',name:'Asha',state:'Tamil Nadu',profile:'Student',commitCount:3,date:fmtDate(Date.now()-86400000)},
        {id:'OW100002',name:'Ravi',state:'Kerala',profile:'Working Professional',commitCount:2,date:fmtDate(Date.now()-43200000)}
      ];
      save(seed);
    }

    // Render functions
    function renderKPIs(){
      const list = load();
      $('#kpiAchieved').innerText = list.length;
      $('#kpiStudents').innerText = list.filter(p=>p.profile==='Student').length;
      $('#kpiPros').innerText = list.filter(p=>p.profile==='Working Professional').length;
      $('#kpiOther').innerText = list.filter(p=>p.profile==='Other').length;
    }

    function renderWall(){
      const tbody = $('#pledgeTbody'); tbody.innerHTML = '';
      const list = load().slice().reverse();
      for(const p of list){
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${p.id}</td><td>${esc(p.name)}</td><td>${p.date}</td><td>${esc(p.profile)}</td><td>${'⭐'.repeat(Math.max(0,p.commitCount))}</td>`;
        tbody.appendChild(tr);
      }
    }

    // Show certificate
    function showCert(pledge){
      $('#certName').innerText = pledge.name;
      const stars = Math.min(5, Math.max(1, Math.ceil(pledge.commitCount)));
      $('#certStars').innerText = '⭐'.repeat(stars);
      $('#certBox').style.display = 'block';
      $('#certBox').scrollIntoView({behavior:'smooth',block:'center'});
    }

    // Form submit
    $('#pledgeForm').addEventListener('submit', function(e){
      e.preventDefault();
      const name = $('#name').value.trim();
      const email = $('#email').value.trim();
      const mobile = $('#mobile').value.trim();
      const state = $('#state').value.trim();
      const profile = $('#profile').value;
      const commitments = $$('input[name="commit"]:checked').map(i=>i.value);

      if(!name || !email || !mobile){
        $('#formMsg').innerText = 'Please fill required fields.';
        return;
      }

      const pledge = {
        id: idGen(),
        name, email, mobile, state, profile,
        commitCount: commitments.length,
        commitments,
        date: fmtDate(Date.now())
      };

      const list = load();
      list.push(pledge);
      save(list);
      renderKPIs(); renderWall();
      $('#formMsg').innerText = 'Thanks — your pledge is recorded!';
      showCert(pledge);
      // keep input values (optional), or reset partially:
      // this.reset();
    });

    // Print certificate
    $('#btnPrintCert').addEventListener('click', function(){
      const area = document.getElementById('certBox').innerHTML;
      const w = window.open('','_blank');
      w.document.write(`<!doctype html><html><head><meta charset="utf-8"><title>Certificate</title><style>body{font-family:Inter,Arial;margin:40px;background:linear-gradient(180deg,#f7fcff,#eef9ff)}.box{max-width:800px;margin:0 auto;padding:30px;border-radius:14px;border:8px solid #dff7ff;text-align:center}</style></head><body><div class="box">${area}</div></body></html>`);
      w.document.close(); w.focus(); setTimeout(()=>w.print(),200);
    });

    $('#btnCloseCert').addEventListener('click', ()=>{ $('#certBox').style.display = 'none'; });

    // Clear local storage (dev)
    $('#btnClearLocal').addEventListener('click', ()=>{
      if(confirm('Clear all pledges saved in this browser?')){ localStorage.removeItem(STORAGE_KEY); location.reload(); }
    });

    // Scroll to form
    $('#btnPledgeScroll').addEventListener('click', ()=>{ document.getElementById('formTop').scrollIntoView({behavior:'smooth',block:'center'}) });

    // Initial render when page loads
    window.addEventListener('load', ()=>{
      document.querySelectorAll('.fadein').forEach((el,i)=>el.style.animationDelay = (i*70)+'ms');
      renderKPIs(); renderWall();
    });
  </script>
</body>
</html>
